/**
 * Hacker News platform connector
 *
 * NOTE: HN has no official API for posting. This is a best-effort implementation
 * that will always return "not supported" since automating HN posts would violate
 * their terms of service. The connector exists for logging/auditing purposes.
 *
 * Manual posting is recommended, with the agent generating draft content.
 */
import { executeWithPolicy, isCircuitOpen } from './base.js';
async function executeHN(action, _config) {
    // HN automation is not supported - always return graceful failure
    // The agent should generate drafts for manual posting
    return {
        success: false,
        platform: 'hn',
        actionType: action.actionType,
        error: 'HN API not supported - content generated for manual posting. See /workspace/content/drafts/hn/',
        retryable: false,
        timestamp: new Date().toISOString(),
    };
}
export async function postToHN(action, config) {
    // Check circuit breaker (even though we always fail, for consistency)
    if (await isCircuitOpen(config.storeDb, 'hn')) {
        return {
            success: false,
            platform: 'hn',
            actionType: action.actionType,
            error: 'Circuit breaker open - platform temporarily disabled',
            retryable: false,
            timestamp: new Date().toISOString(),
        };
    }
    // Still run through policy for logging/auditing
    return executeWithPolicy(action, config, executeHN);
}
/**
 * Generate HN-specific draft content
 * This formats content optimally for manual HN submission
 */
export function generateHNDraft(content, title) {
    const draft = `# HN Draft - ${new Date().toISOString()}

## Title
${title || 'TODO: Write a compelling title'}

## Content
${content}

## Submission Notes
- Target: news.ycombinator.com/submit
- Best times: 6-9am PT, 12-2pm PT (weekdays)
- Keep title factual, avoid clickbait
- Self-posts: Use "text" field, not URL

## Pre-submission Checklist
[ ] Title is under 80 chars
[ ] Content is relevant to HN audience
[ ] Not a duplicate of recent submissions
[ ] Following HN guidelines

---
Generated by Marketing Agent Swarm
`;
    return draft;
}
//# sourceMappingURL=hn.js.map